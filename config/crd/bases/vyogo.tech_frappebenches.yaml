---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.1
  creationTimestamp: null
  name: frappebenches.vyogo.tech
spec:
  group: vyogo.tech
  names:
    kind: FrappeBench
    listKind: FrappeBenchList
    plural: frappebenches
    singular: frappebench
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.phase
      name: Phase
      type: string
    - jsonPath: .status.installedApps
      name: Apps
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: FrappeBench is the Schema for the frappebenches API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: FrappeBenchSpec defines the desired state of FrappeBench
            properties:
              appsJSON:
                description: AppsJSON is deprecated, use Apps instead JSON array of
                  app names (e.g., '["erpnext", "hrms"]')
                type: string
              apps:
                description: Apps to install with their sources Supports FPM packages,
                  Git repositories, and pre-built images
                items:
                  description: AppSource defines where an app comes from and how to
                    install it
                  properties:
                    gitBranch:
                      description: GitBranch for git source (e.g., "version-15") Optional,
                        defaults to repository default branch
                      type: string
                    gitUrl:
                      description: GitURL for git source (e.g., "https://github.com/frappe/erpnext")
                        Required when source is "git"
                      type: string
                    name:
                      description: Name of the app (e.g., "erpnext", "hrms")
                      type: string
                    org:
                      description: Org is the organization for FPM packages (e.g.,
                        "frappe") Required when source is "fpm"
                      type: string
                    source:
                      description: 'Source type: fpm, git, or image fpm: Install from
                        FPM package repository git: Install from Git repository (requires
                        Git enabled) image: App is pre-installed in container image'
                      enum:
                      - fpm
                      - git
                      - image
                      type: string
                    version:
                      description: Version for FPM packages (e.g., "1.0.0") Required
                        when source is "fpm"
                      type: string
                  required:
                  - name
                  - source
                  type: object
                type: array
              componentReplicas:
                description: ComponentReplicas defines replica counts for each component
                properties:
                  gunicorn:
                    default: 1
                    description: Gunicorn replicas
                    format: int32
                    minimum: 1
                    type: integer
                  nginx:
                    default: 1
                    description: Nginx replicas
                    format: int32
                    minimum: 1
                    type: integer
                  socketio:
                    default: 1
                    description: Socketio replicas
                    format: int32
                    minimum: 1
                    type: integer
                  workerDefault:
                    default: 1
                    description: WorkerDefault replicas
                    format: int32
                    minimum: 0
                    type: integer
                  workerLong:
                    default: 1
                    description: WorkerLong replicas
                    format: int32
                    minimum: 0
                    type: integer
                  workerShort:
                    default: 1
                    description: WorkerShort replicas
                    format: int32
                    minimum: 0
                    type: integer
                type: object
              componentResources:
                description: ComponentResources defines resource requirements for each
                  component
                properties:
                  gunicorn:
                    description: Gunicorn resources
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Limits describes the maximum amount of compute
                          resources allowed
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Requests describes the minimum amount of compute
                          resources required
                        type: object
                    type: object
                  nginx:
                    description: Nginx resources
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Limits describes the maximum amount of compute
                          resources allowed
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Requests describes the minimum amount of compute
                          resources required
                        type: object
                    type: object
                  scheduler:
                    description: Scheduler resources
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Limits describes the maximum amount of compute
                          resources allowed
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Requests describes the minimum amount of compute
                          resources required
                        type: object
                    type: object
                  socketio:
                    description: Socketio resources
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Limits describes the maximum amount of compute
                          resources allowed
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Requests describes the minimum amount of compute
                          resources required
                        type: object
                    type: object
                  workerDefault:
                    description: WorkerDefault resources
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Limits describes the maximum amount of compute
                          resources allowed
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Requests describes the minimum amount of compute
                          resources required
                        type: object
                    type: object
                  workerLong:
                    description: WorkerLong resources
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Limits describes the maximum amount of compute
                          resources allowed
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Requests describes the minimum amount of compute
                          resources required
                        type: object
                    type: object
                  workerShort:
                    description: WorkerShort resources
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Limits describes the maximum amount of compute
                          resources allowed
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Requests describes the minimum amount of compute
                          resources required
                        type: object
                    type: object
                type: object
              domainConfig:
                description: DomainConfig defines default domain behavior for sites
                  on this bench
                properties:
                  autoDetect:
                    default: true
                    description: AutoDetect enables automatic domain detection from
                      cluster
                    type: boolean
                  ingressControllerRef:
                    description: IngressControllerRef references the Ingress Controller
                      service
                    properties:
                      name:
                        description: Name of the resource
                        type: string
                      namespace:
                        description: Namespace of the resource
                        type: string
                    required:
                    - name
                    type: object
                  suffix:
                    description: Suffix to append to site names (e.g., ".myplatform.com")
                    type: string
                type: object
              fpmConfig:
                description: FPMConfig for FPM repository configuration Merged with
                  operator-level FPM configuration
                properties:
                  defaultRepo:
                    description: DefaultRepo for publishing packages (optional)
                    type: string
                  repositories:
                    description: Repositories to add to FPM configuration These are
                      added to any operator-level default repositories
                    items:
                      description: FPMRepository defines an FPM package repository
                      properties:
                        authSecretRef:
                          description: 'AuthSecretRef references a secret with FPM
                            authentication credentials Secret should contain keys:
                            username, password'
                          properties:
                            name:
                              description: name is unique within a namespace to reference
                                a secret resource.
                              type: string
                            namespace:
                              description: namespace defines the space within which
                                the secret name must be unique.
                              type: string
                          type: object
                          x-kubernetes-map-type: atomic
                        name:
                          description: Name of the repository (e.g., "company-private",
                            "frappe-community")
                          type: string
                        priority:
                          default: 50
                          description: 'Priority for repository search order (lower
                            number = higher priority) Default: 50'
                          type: integer
                        url:
                          description: URL of the repository (e.g., "https://fpm.company.com")
                          type: string
                      required:
                      - name
                      - url
                      type: object
                    type: array
                type: object
              frappeVersion:
                description: FrappeVersion specifies the Frappe framework version
                type: string
              gitConfig:
                description: GitConfig controls Git-based app installation Overrides
                  operator-level Git configuration
                properties:
                  enabled:
                    description: 'Enabled controls whether Git-based app installation
                      is allowed Set to false in enterprise environments without Git
                      access If not specified, uses operator-level default'
                    type: boolean
                type: object
              imageConfig:
                description: ImageConfig defines the container image configuration
                properties:
                  pullPolicy:
                    description: PullPolicy is the image pull policy
                    enum:
                    - Always
                    - Never
                    - IfNotPresent
                    type: string
                  pullSecrets:
                    description: PullSecrets for private registries
                    items:
                      description: LocalObjectReference contains enough information
                        to let you locate the referenced object inside the same namespace.
                      properties:
                        name:
                          description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            TODO: Add other useful fields. apiVersion, kind, uid?'
                          type: string
                      type: object
                      x-kubernetes-map-type: atomic
                    type: array
                  repository:
                    description: Repository is the base image repository
                    type: string
                  tag:
                    description: Tag is the image tag
                    type: string
                type: object
              redisConfig:
                description: RedisConfig defines Redis/Dragonfly configuration
                properties:
                  connectionSecretRef:
                    description: ConnectionSecretRef for external Redis
                    properties:
                      name:
                        description: name is unique within a namespace to reference
                          a secret resource.
                        type: string
                      namespace:
                        description: namespace defines the space within which the
                          secret name must be unique.
                        type: string
                    type: object
                    x-kubernetes-map-type: atomic
                  image:
                    description: Image is the Redis/Dragonfly container image
                    type: string
                  maxMemory:
                    anyOf:
                    - type: integer
                    - type: string
                    description: MaxMemory sets maximum memory for cache eviction
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                  resources:
                    description: Resources for Redis/Dragonfly
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Limits describes the maximum amount of compute
                          resources allowed
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: Requests describes the minimum amount of compute
                          resources required
                        type: object
                    type: object
                  storageSize:
                    anyOf:
                    - type: integer
                    - type: string
                    description: StorageSize for persistent storage
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                  type:
                    description: 'Type: redis or dragonfly'
                    enum:
                    - redis
                    - dragonfly
                    type: string
                required:
                - type
                type: object
            required:
            - frappeVersion
            type: object
          status:
            description: FrappeBenchStatus defines the observed state of FrappeBench
            properties:
              conditions:
                description: Conditions represent the latest available observations
                  of the bench's state
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource. --- This struct is intended for direct
                    use as an array at the field path .status.conditions.  For example,
                    \n type FooStatus struct{ // Represents the observations of a
                    foo's current state. // Known .status.conditions.type are: \"Available\",
                    \"Progressing\", and \"Degraded\" // +patchMergeKey=type // +patchStrategy=merge
                    // +listType=map // +listMapKey=type Conditions []metav1.Condition
                    `json:\"conditions,omitempty\" patchStrategy:\"merge\" patchMergeKey:\"type\"
                    protobuf:\"bytes,1,rep,name=conditions\"` \n // other fields }"
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition
                        transitioned from one status to another. This should be when
                        the underlying condition changed.  If that is not known, then
                        using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating
                        details about the transition. This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation
                        that the condition was set based upon. For instance, if .metadata.generation
                        is currently 12, but the .status.conditions[x].observedGeneration
                        is 9, the condition is out of date with respect to the current
                        state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating
                        the reason for the condition's last transition. Producers
                        of specific condition types may define expected values and
                        meanings for this field, and whether the values are considered
                        a guaranteed API. The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                        --- Many .condition.type values are consistent across resources
                        like Available, but because arbitrary conditions can be useful
                        (see .node.status.conditions), the ability to deconflict is
                        important. The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              fpmRepositories:
                description: FPMRepositories lists the configured FPM repositories
                items:
                  type: string
                type: array
              gitEnabled:
                description: GitEnabled indicates whether Git is enabled for this
                  bench
                type: boolean
              installedApps:
                description: InstalledApps lists the apps that have been successfully
                  installed
                items:
                  type: string
                type: array
              observedGeneration:
                description: ObservedGeneration reflects the generation of the most
                  recently observed FrappeBench
                format: int64
                type: integer
              phase:
                description: Phase represents the current phase of the bench
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}

