# .gitignore Reference

This document explains what's ignored in the repository and why.

## Quick Reference

### ‚úÖ What IS Committed

**Source Code:**
- `*.go` - All Go source files
- `go.mod`, `go.sum` - Go dependencies
- `Makefile` - Build automation

**Kubernetes Operator:**
- `api/v1alpha1/` - CRD definitions
- `controllers/` - Controller logic
- `config/` - Kubernetes manifests
- `config/crd/bases/vyogo.tech_*.yaml` - Generated CRDs (committed for easy deployment)

**Deployment:**
- `Dockerfile`, `docker-compose.yml`
- `.devcontainer/` - Development container config
- `install.yaml` - Generated install manifest
- `install.sh` - Installation script

**Documentation & Examples:**
- `*.md` - All documentation
- `examples/` - Example configurations
- `config/samples/` - Sample manifests

### ‚ùå What is Ignored

**Build Artifacts:**
```
bin/                  # Compiled binaries
testbin/             # Test binaries
vendor/              # Go dependencies (use go.mod instead)
*.test, *.out        # Test outputs
```

**IDE & Editor:**
```
.vscode/             # VSCode settings
.idea/               # JetBrains IDEs
*.swp, *.swo        # Vim swap files
*~                   # Editor backups
.DS_Store           # macOS Finder info
```

**Secrets & Sensitive Data:**
```
*secret*.yaml       # Any secret YAML (except examples)
*password*.yaml     # Password configs
*.pem, *.key        # Certificates and keys
.env                # Environment files
secrets/            # Secrets directory
```

**Local Development:**
```
mariadb-data/       # Local database data
redis-data/         # Local cache data
*.db, *.sqlite      # SQLite databases
operator-logs/      # Local logs
tmp/, temp/         # Temporary files
```

**Testing:**
```
coverage.*          # Coverage reports
test-*.yaml         # Ad-hoc test manifests
debug-*.yaml        # Debug configurations
*.log               # Log files
```

## Common Scenarios

### Adding Personal Test Manifests

If you create test manifests for local development:

```bash
# These will be ignored automatically
kubectl apply -f test-mysite.yaml
kubectl apply -f debug-bench.yaml
```

### Working with Secrets

Keep secrets out of git:

```bash
# Create secret (will be ignored)
kubectl create secret generic my-secret > secret-backup.yaml

# Use sample format instead for examples
cp secret-backup.yaml config/samples/example-secret.yaml
```

### IDE Configuration

Only shared IDE settings are committed:

```
.vscode/
‚îú‚îÄ‚îÄ settings.json    ‚úÖ Committed (shared settings)
‚îú‚îÄ‚îÄ tasks.json       ‚úÖ Committed (shared tasks)
‚îî‚îÄ‚îÄ launch.json      ‚ùå Ignored (personal config)
```

### Temporary Development Files

Create personal notes without cluttering the repo:

```bash
# These are ignored
NOTES.md
TODO.md
SCRATCH.md
personal-*.yaml
dev-notes.md
```

## Special Cases

### Exception: Sample Secrets

Files in `config/samples/` with "secret" in the name ARE tracked because they're examples:

```
config/samples/test-secrets.yaml     ‚úÖ Committed (example)
secret-production.yaml               ‚ùå Ignored (real secret)
```

### Exception: CRD Bases

Generated CRDs in `config/crd/bases/vyogo.tech_*.yaml` ARE committed for easier installation:

```
config/crd/bases/vyogo.tech_frappesites.yaml    ‚úÖ Committed
config/crd/bases/vyogo.tech_frappebenches.yaml  ‚úÖ Committed
```

### Exception: install.yaml

The generated `install.yaml` IS committed for one-command installation:

```
install.yaml         ‚úÖ Committed (for easy deployment)
install.yaml.backup  ‚ùå Ignored (backup file)
```

## Cleaning Up

If you accidentally committed files that should be ignored:

```bash
# Remove from git but keep locally
git rm --cached <file>

# Remove directory
git rm --cached -r <directory>

# Commit the removal
git commit -m "Remove ignored files from tracking"
```

## Custom Patterns

To add project-specific patterns, edit `.gitignore`:

```bash
# Add at the end of .gitignore
echo "my-custom-pattern/" >> .gitignore
```

## Checking What's Ignored

```bash
# Check if a file is ignored
git check-ignore -v filename

# List all ignored files in current directory
git status --ignored

# List all tracked files
git ls-files
```

## Best Practices

1. **Never commit secrets** - Use Kubernetes Secrets or external secret managers
2. **Don't commit binaries** - They're generated from source
3. **Regenerate CRDs** - Use `make manifests` to regenerate
4. **Use examples for samples** - Keep real configs local
5. **Clean up regularly** - Remove unused local files

## Troubleshooting

### File Not Being Ignored

```bash
# File might be already tracked
git ls-files | grep filename

# If tracked, remove from git
git rm --cached filename
```

### Accidentally Committed Secret

```bash
# Remove from history (DANGEROUS - rewrites history)
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch secret-file.yaml" \
  --prune-empty --tag-name-filter cat -- --all

# Safer: Rotate the secret and commit removal
# 1. Rotate/invalidate the exposed secret
# 2. Remove from git: git rm secret-file.yaml
# 3. Commit: git commit -m "Remove exposed secret"
```

### Need to Track Ignored File

```bash
# Force add a specific ignored file
git add -f path/to/file

# Or create exception in .gitignore
# Add this line BEFORE the ignore pattern:
!path/to/file
```

## Resources

- [Git Documentation - .gitignore](https://git-scm.com/docs/gitignore)
- [GitHub .gitignore Templates](https://github.com/github/gitignore)
- [Kubernetes Secrets Best Practices](https://kubernetes.io/docs/concepts/configuration/secret/)

---

Keep your repository clean and secure! üîí

